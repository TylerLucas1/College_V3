DELIMITER //
CREATE FUNCTION available_seats(section_id INT)
RETURNS INT DETERMINISTIC
BEGIN
    DECLARE room_cap INT;
    DECLARE enrolled INT;
   
    SELECT room_capacity INTO room_cap
    FROM room
    WHERE section_id = section_id
    LIMIT 1;
   
    SELECT COUNT(*) INTO enrolled
    FROM enrollment
    WHERE semester_id = section_id;
   
    RETURN room_cap - enrolled;
END //
DELIMITER ;
